{"version":3,"file":"component---src-pages-stats-js-804162df668ef22480bd.js","mappings":";iGAAA,OAOA,WACE,aAEA,IAAIA,EAAS,CAAC,EAAEC,eAChB,SAASC,IAEP,IADA,IAAIC,EAAU,GACLC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAMF,UAAUD,GACpB,GAAKG,EAAL,CACA,IAAIC,SAAiBD,EACrB,GAAgB,WAAZC,GAAoC,WAAZA,EAC1BL,EAAQM,KAAKF,QACR,GAAIG,MAAMC,QAAQJ,IACvB,GAAIA,EAAID,OAAQ,CACd,IAAIM,EAAQV,EAAWW,MAAM,KAAMN,GAC/BK,GACFT,EAAQM,KAAKG,EAEjB,OACK,GAAgB,WAAZJ,EACT,GAAID,EAAIO,WAAaC,OAAOC,UAAUF,SACpC,IAAK,IAAIG,KAAOV,EACVP,EAAOkB,KAAKX,EAAKU,IAAQV,EAAIU,IAC/Bd,EAAQM,KAAKQ,QAIjBd,EAAQM,KAAKF,EAAIO,WAnBH,CAsBpB,CACA,OAAOX,EAAQgB,KAAK,IACtB,CACqCC,EAAOC,SAC1CnB,EAAWoB,QAAUpB,EACrBkB,EAAOC,QAAUnB,QAKhB,KAFwB,EAAF,WACrB,OAAOA,CACR,UAFoB,OAEpB,YAIJ,CA5CD,kGCDA,MAAMqB,EAAW,2BACjB,IACIC,EAAW,EA2Kf,UAzKkBC,KACd,MAAM,EAACC,EAAW,EAACC,IAAiBC,EAAAA,EAAAA,UAAS,CACzCC,YAAa,UACbC,OAAQ,UACRC,WAAY,aAGV,EAACC,EAAS,EAACC,IAAeL,EAAAA,EAAAA,UAAS,KACnC,EAACM,EAAoB,EAACC,IAA0BP,EAAAA,EAAAA,WAAS,GAE/D,SAASQ,EAAeC,GACpB,MAAMC,EAAM,IAAIC,IAAOhB,EAdhB,6BAgBP,OADAe,EAAIE,aAAaC,OAAO,WAAYjB,GAC7BkB,MAAMJ,GACRK,MAAMC,GACCA,EAASC,GAAWD,EAASE,OACrBC,QAAQC,OAAOJ,KAE9BD,MAAMM,IACCZ,KACAa,EAAAA,EAAAA,GAAIC,SAASC,uBAAuB,WAAWC,SAC1CC,GAAOA,EAAGC,UAAUC,OAAO,YAEhCnB,EAAekB,UAAUE,IAAI,UAC7BpB,EAAekB,UAAUC,OAAO,iBAGpCvB,EAAYgB,EAAW,IAE1BS,OAAOC,GAAMC,QAAQC,MAAMF,IACpC,CAgBA,OAdAG,EAAAA,EAAAA,YAAU,KACNpB,MAAMnB,EAAW,sBACZoB,MAAMC,GACCA,EAASC,GAAWD,EAASE,OACrBC,QAAQC,OAAOJ,KAE9BD,MAAMM,IACHd,GAAuB,GACvBR,EAAcsB,EAAW,IAE5BS,OAAOC,GAAMC,QAAQC,MAAMF,KAChCvB,GAAgB,GACjB,IAGC2B,EAAAA,cAACC,EAAAA,EAAM,KACHD,EAAAA,cAACE,EAAAA,EAAG,CAACC,MAAM,UAEXH,EAAAA,cAAA,OAAKI,UAAU,aACXJ,EAAAA,cAAA,MAAII,UAAU,eAAc,iBAE5BJ,EAAAA,cAAA,aACIA,EAAAA,cAAA,aACIA,EAAAA,cAAA,UACIA,EAAAA,cAAA,UAAI,iBACJA,EAAAA,cAAA,MACII,UACIjC,EAAsB,UAAY,MAGrCR,EAAWG,YAAYuC,iBAAiB,WAGjDL,EAAAA,cAAA,UACIA,EAAAA,cAAA,UAAI,qBACJA,EAAAA,cAAA,MACII,UACIjC,EAAsB,UAAY,MAGrCR,EAAWI,OAAOsC,iBAAkB,IAAI,gBAIjDL,EAAAA,cAAA,UACIA,EAAAA,cAAA,UAAI,yBACJA,EAAAA,cAAA,MACII,UACIjC,EAAsB,UAAY,MAGrCR,EAAWK,WAAWqC,iBAAkB,IAAI,kBAO7DL,EAAAA,cAAA,WACIA,EAAAA,cAAA,MAAII,UAAU,gCAA+B,oBAI7CJ,EAAAA,cAAA,OAAKI,UAAU,0BAAyB,6CAMhDJ,EAAAA,cAAA,OAAKI,UAAU,+BACXJ,EAAAA,cAAA,SAAOI,UAAU,0BACbJ,EAAAA,cAAA,aACIA,EAAAA,cAAA,UACIA,EAAAA,cAAA,MAAII,UAAU,QAAO,QACrBJ,EAAAA,cAAA,UAAI,aACJA,EAAAA,cAAA,MACII,UAAU,iBACVE,QAAUC,IACFA,EAAEC,OAAOhB,UAAUiB,SAAS,YAEhCF,EAAEC,OAAOhB,UAAUE,IAAI,gBACvBjC,EAAW,EACXY,EAAekC,EAAEC,QAAO,GAE/B,UAGDR,EAAAA,cAAA,MACII,UAAU,UACVE,QAAUC,IACFA,EAAEC,OAAOhB,UAAUiB,SAAS,YAEhCF,EAAEC,OAAOhB,UAAUE,IAAI,gBACvBjC,EAAW,EACXY,EAAekC,EAAEC,QAAO,GAE/B,gBAMTR,EAAAA,cAAA,aACyB,IAApB/B,EAAS1B,OACNyD,EAAAA,cAAA,MAAII,UAAW,aACXJ,EAAAA,cAAA,MAAII,UAAU,kBAAkBM,QAAQ,KAAI,eAKhDzC,EAAS0C,KAAI,CAACC,EAAOC,IACjBb,EAAAA,cAAA,MACII,UAAS,SACLS,EAAQ,EAAI,MAAQ,QAExB3D,IAAK2D,GAELb,EAAAA,cAAA,MAAII,UAAU,wBACTS,EAAQ,EAAE,KAEfb,EAAAA,cAAA,UAAKY,EAAME,UACXd,EAAAA,cAAA,MAAII,UAAU,mBACTQ,EAAM7C,OAAOsC,kBAElBL,EAAAA,cAAA,MAAII,UAAU,mBACTQ,EAAM5C,kBAQ9B","sources":["webpack://sponsorblock/./node_modules/classnames/index.js","webpack://sponsorblock/./src/pages/stats.js"],"sourcesContent":["/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n  function classNames() {\n    var classes = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg)) {\n        if (arg.length) {\n          var inner = classNames.apply(null, arg);\n          if (inner) {\n            classes.push(inner);\n          }\n        }\n      } else if (argType === 'object') {\n        if (arg.toString === Object.prototype.toString) {\n          for (var key in arg) {\n            if (hasOwn.call(arg, key) && arg[key]) {\n              classes.push(key);\n            }\n          }\n        } else {\n          classes.push(arg.toString());\n        }\n      }\n    }\n    return classes.join(' ');\n  }\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","import React, { useState, useEffect } from \"react\";\nimport classNames from \"classnames\";\n\nimport Layout from \"../components/layout\";\nimport Seo from \"../components/seo\";\n\nconst API_BASE = \"https://sponsor.ajay.app\";\nlet endpoint = \"/api/getTopBrandingUsers?\";\nlet sortType = 0;\n\nconst IndexPage = () => {\n    const [totalStats, setTotalStats] = useState({\n        activeUsers: \"Loading\",\n        titles: \"Loading\",\n        thumbnails: \"Loading\",\n    });\n\n    const [topUsers, setTopUsers] = useState([]);\n    const [isTotalStatsLoading, setIsTotalStatsLoading] = useState(true);\n\n    function setTopUserData(clickedElement) {\n        const url = new URL(`${API_BASE}${endpoint}`);\n        url.searchParams.append(\"sortType\", sortType);\n        return fetch(url)\n            .then((response) => {\n                if (response.ok) return response.json()\n                else return Promise.reject(response)\n            })\n            .then((resultData) => {\n                if (clickedElement) {\n                    [...document.getElementsByClassName(\"sorted\")].forEach(\n                        (el) => el.classList.remove(\"sorted\")\n                    );\n                    clickedElement.classList.add(\"sorted\");\n                    clickedElement.classList.remove(\"sort-loading\");\n                }\n\n                setTopUsers(resultData);\n            })\n            .catch((r) => console.error(r));\n    }\n\n    useEffect(() => {\n        fetch(API_BASE + \"/api/brandingStats\")\n            .then((response) => {\n                if (response.ok) return response.json()\n                else return Promise.reject(response)\n            })\n            .then((resultData) => {\n                setIsTotalStatsLoading(false);\n                setTotalStats(resultData);\n            })\n            .catch((r) => console.error(r));\n        setTopUserData();\n    }, []);\n\n    return (\n        <Layout>\n            <Seo title=\"Stats\" />\n\n            <div className=\"container\">\n                <h2 className=\"text-center\">Overall Stats</h2>\n\n                <table>\n                    <tbody>\n                        <tr>\n                            <td>Active Users:</td>\n                            <td\n                                className={\n                                    isTotalStatsLoading ? \"loading\" : null\n                                }\n                            >\n                                {totalStats.activeUsers.toLocaleString()} users\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>Titles Submitted:</td>\n                            <td\n                                className={\n                                    isTotalStatsLoading ? \"loading\" : null\n                                }\n                            >\n                                {totalStats.titles.toLocaleString()}{\" \"}\n                                submissions\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>Thumbnails Submitted:</td>\n                            <td\n                                className={\n                                    isTotalStatsLoading ? \"loading\" : null\n                                }\n                            >\n                                {totalStats.thumbnails.toLocaleString()}{\" \"}\n                                submissions\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n                <div>\n                    <h2 className=\"text-center no-bottom-margin\">\n                        Top Contributors\n                    </h2>\n\n                    <div className=\"text-center text-small\">\n                        Click a column title to change the sort\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"container-fluid stats-table\">\n                <table className=\"highlight-row-on-hover\">\n                    <thead>\n                        <tr>\n                            <th className=\"rank\">Rank</th>\n                            <th>User Name</th>\n                            <th\n                                className=\"pointer sorted\"\n                                onClick={(e) => {\n                                    if (e.target.classList.contains(\"sorted\"))\n                                        return;\n                                    e.target.classList.add(\"sort-loading\");\n                                    sortType = 0;\n                                    setTopUserData(e.target);\n                                }}\n                            >\n                                Titles\n                            </th>\n                            <th\n                                className=\"pointer\"\n                                onClick={(e) => {\n                                    if (e.target.classList.contains(\"sorted\"))\n                                        return;\n                                    e.target.classList.add(\"sort-loading\");\n                                    sortType = 1;\n                                    setTopUserData(e.target);\n                                }}\n                            >\n                                Thumbnails\n                            </th>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n                        {topUsers.length === 0 ? (\n                            <tr className={\"row--even\"}>\n                                <td className=\"topUsersLoading\" colSpan=\"5\">\n                                    Loading...\n                                </td>\n                            </tr>\n                        ) : (\n                            topUsers.map((value, index) => (\n                                <tr\n                                    className={`row--${\n                                        index % 2 ? \"odd\" : \"even\"\n                                    }`}\n                                    key={index}\n                                >\n                                    <td className=\"rank celltype-number\">\n                                        {index + 1}.\n                                    </td>\n                                    <td>{value.userName}</td>\n                                    <td className=\"celltype-number\">\n                                        {value.titles.toLocaleString()}\n                                    </td>\n                                    <td className=\"celltype-number\">\n                                        {value.thumbnails}\n                                    </td>\n                                </tr>\n                            ))\n                        )}\n                    </tbody>\n                </table>\n            </div>\n        </Layout>\n    );\n};\n\nexport default IndexPage;\n"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","module","exports","default","API_BASE","sortType","IndexPage","totalStats","setTotalStats","useState","activeUsers","titles","thumbnails","topUsers","setTopUsers","isTotalStatsLoading","setIsTotalStatsLoading","setTopUserData","clickedElement","url","URL","searchParams","append","fetch","then","response","ok","json","Promise","reject","resultData","_toConsumableArray","document","getElementsByClassName","forEach","el","classList","remove","add","catch","r","console","error","useEffect","React","Layout","Seo","title","className","toLocaleString","onClick","e","target","contains","colSpan","map","value","index","userName"],"sourceRoot":""}